<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KatMovie Hub - Free Movie Downloads</title>
    
    <!-- SEO Meta Tags (unchanged) -->
    <meta name="description" content="KatMovie Hub provides latest Hindi dubbed Hollywood movies with dual audio options. Watch trailers and official content in 480p, 720p, 1080p quality.">
    <meta name="keywords" content="katmovie hub, hindi dubbed movies, dual audio movies, hollywood hindi dubbed, latest movies 2025, movie trailers hindi">
    <meta name="robots" content="index, follow">
    <meta name="author" content="KatMovie Hub">
    <meta name="language" content="en">
    
    <meta property="og:title" content="KatMovie Hub - Latest Hindi Dubbed Movies">
    <meta property="og:description" content="Watch latest Hollywood movies in Hindi dubbed and dual audio. Official trailers and updates.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://realknowledge39.github.io/Katmoviesworlds/">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/ff0000/ffffff?text=KatMovie+Hub">
    <meta property="og:site_name" content="KatMovie Hub">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KatMovie Hub - Latest Hindi Dubbed Movies">
    <meta name="twitter:description" content="Latest Hollywood movies in Hindi dubbed and dual audio. Official content and trailers.">
    <meta name="twitter:image" content="https://via.placeholder.com/1200x630/ff0000/ffffff?text=KatMovie+Hub">

    <link rel="canonical" href="https://realknowledge39.github.io/Katmoviesworlds/">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #0a0a0a; color: #fff; font-family: 'Arial', sans-serif; margin: 0; padding: 0; }
        /* ... (your existing styles remain unchanged) ... */

        /* Add this to prevent body scroll jump when modal opens */
        body.modal-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }

        /* Your existing modal/share styles here */
    </style>
</head>
<body>

    <!-- Your existing HTML structure (header, nav, trailer, grid, footer) -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script async src="https://www.instagram.com/embed.js"></script>
    <script>
        // ... (your existing variables and fetch/render functions unchanged) ...

        // Updated showDetail with prevent scroll jump
        async function showDetail(postId, event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }

            try {
                const response = await fetch(`${BASE_URL}/${postId}`);
                const post = await response.json();
                const fullContent = post.content || '<p>No content available.</p>';

                let youtubeUrl = '';
                const patterns = [/youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/i, /youtu\.be\/([a-zA-Z0-9_-]{11})/i, /youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/i];
                for (const pattern of patterns) {
                    const match = fullContent.match(pattern);
                    if (match) {
                        youtubeUrl = `https://www.youtube.com/embed/${match[1]}?autoplay=1&mute=1&rel=0`;
                        break;
                    }
                }

                let videoSection = youtubeUrl ? `<div class="trailer my-3"><iframe src="${youtubeUrl}" allowfullscreen allow="autoplay"></iframe></div>` : '';

                const modifiedContent = fullContent.replace(/<a /g, '<a target="_blank" rel="noopener" ');

                document.getElementById('movieModalLabel').textContent = post.title;
                document.getElementById('modalContent').innerHTML = videoSection + modifiedContent;

                if (window.instgrm) instgrm.Embeds.process();

                const modal = new bootstrap.Modal(document.getElementById('movieModal'));
                modal.show();
            } catch (error) {
                alert('Failed to load movie details.');
            }
        }

        // Updated openShareModal with prevent scroll jump
        function openShareModal(postId, title, poster, event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }

            currentShareData = { postId, title, poster };

            // Show preview
            document.getElementById('sharePreview').innerHTML = `
                <strong>${title}</strong><br>
                <img src="${poster}" alt="Poster" style="max-width:100%; height:auto; margin:10px 0; border-radius:8px;">
            `;

            const modal = new bootstrap.Modal(document.getElementById('shareModal'));
            modal.show();
        }

        // In renderGrid â€“ update button onclick to pass event
        // Change this line inside renderGrid:
        // <button class="btn btn-danger show-detail" onclick="showDetail(${post.ID}, event)">Watch / Download</button>
        // <button class="btn btn-success share-btn" onclick="openShareModal(${post.ID}, '${post.title.replace(/'/g, "\\'")}', '${posterUrl.replace(/'/g, "\\'")}', event)">Share</button>

        // ... rest of your script (loadMoreMovies, shareTo, searchMovies, handleScroll) unchanged ...

        document.addEventListener('DOMContentLoaded', () => {
            loadMoreMovies();
            document.getElementById('searchInput').addEventListener('input', searchMovies);
            window.addEventListener('scroll', handleScroll);
            window.addEventListener('touchmove', handleScroll);

            // Share buttons in modal
            document.getElementById('shareTelegram')?.addEventListener('click', e => { e.preventDefault(); shareTo('telegram'); });
            document.getElementById('shareWhatsapp')?.addEventListener('click', e => { e.preventDefault(); shareTo('whatsapp'); });
            document.getElementById('shareInstagram')?.addEventListener('click', e => { e.preventDefault(); shareTo('instagram'); });
        });
    </script>
</body>
</html>